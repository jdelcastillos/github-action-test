name: wf-dotnet

on:
    workflow_dispatch:
    pull_request:
    push:
      branches:
        - main
      
permissions:
  id-token: write
  contents: read
  packages: write
  repository-projects: read

jobs:
    setup:
        runs-on: ubuntu-latest
        outputs:
          matrix: ${{ steps.matrix.outputs.value }}
        steps:
          - id: matrix
            run: |
                echo '::set-output name=value::[
                {
                "variable":"FOLDER_WORK",
                "valor":"vars.FOLDER_PERSONALIZACION_SYNC",
                "archivo":"appspec.yml"
                },
                {
                "variable":"FOLDER_WORK",
                "valor":"vars.FOLDER_PERSONALIZACION_SYNC",
                "archivo":"appspec.yml"
                }
                ]'
          - id: hola
            run: echo 'HOLA'
            
    environment:
        name: ðŸŽ­ environment
        needs: [setup]
        runs-on: ubuntu-latest
        strategy:
            matrix:
                value: ${{ fromJson(setup.outputs.matrix.value) }}
        steps:
            - name: ðŸŽ­ Set Environment
              id: set-environment
              run: |
                    echo "${{ matrix.value }}"
